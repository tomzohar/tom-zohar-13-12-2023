<div class="homepage">

  <div class="search-container">

    <app-card class="search-box">
      <app-autocomplete
        [options]="searchOptions$ | async"
        (changed)="onNewSearch($event)"
        (optionSelected)="onLocationSelected($event)"
      ></app-autocomplete>
    </app-card>
  </div>


  <div class="current-weather">
    <ng-container *ngIf="viewData$ | async as viewData">

      <app-current-weather
        [icon]="getIcon(viewData.currentWeather.WeatherIcon)"
        [city]="viewData.currentLocation.LocalizedName"
        [country]="viewData.currentLocation.Country.LocalizedName"
        [temperature]="viewData.currentWeather.Temperature.Metric"
        [weatherDescription]="viewData.currentWeather.WeatherText"
        [time]="viewData.currentWeather.LocalObservationDateTime"
      />

      <div class="forecast">
        <app-forecast-summary
          *ngFor="let forecast of viewData.multiForecast.DailyForecasts"
          [icon]="getIcon(viewData.currentWeather.IsDayTime ? forecast.Day.Icon : forecast.Night.Icon)"
          [description]="viewData.currentWeather.IsDayTime ? forecast.Day.IconPhrase : forecast.Night.IconPhrase"
          [maxTemp]="forecast.Temperature.Maximum"
          [minTemp]="forecast.Temperature.Minimum"
          [date]="forecast.Date"
        />
      </div>

    </ng-container>
  </div>
</div>
